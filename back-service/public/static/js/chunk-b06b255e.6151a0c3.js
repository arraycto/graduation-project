(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b06b255e"],{"07c7":function(e,t,a){"use strict";var s=a("bcfc"),n=a.n(s);n.a},"1aba":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"material-input__component",class:e.computedClasses},[a("div",{class:{iconClass:e.icon}},[e.icon?a("i",{staticClass:"el-input__icon material-input__icon",class:["el-icon-"+e.icon]}):e._e(),e._v(" "),"email"===e.type?a("input",{directives:[{name:"model",rawName:"v-model",value:e.currentValue,expression:"currentValue"}],staticClass:"material-input",attrs:{name:e.name,placeholder:e.fillPlaceHolder,readonly:e.readonly,disabled:e.disabled,autocomplete:e.autoComplete,required:e.required,type:"email"},domProps:{value:e.currentValue},on:{focus:e.handleMdFocus,blur:e.handleMdBlur,input:[function(t){t.target.composing||(e.currentValue=t.target.value)},e.handleModelInput]}}):e._e(),e._v(" "),"url"===e.type?a("input",{directives:[{name:"model",rawName:"v-model",value:e.currentValue,expression:"currentValue"}],staticClass:"material-input",attrs:{name:e.name,placeholder:e.fillPlaceHolder,readonly:e.readonly,disabled:e.disabled,autocomplete:e.autoComplete,required:e.required,type:"url"},domProps:{value:e.currentValue},on:{focus:e.handleMdFocus,blur:e.handleMdBlur,input:[function(t){t.target.composing||(e.currentValue=t.target.value)},e.handleModelInput]}}):e._e(),e._v(" "),"number"===e.type?a("input",{directives:[{name:"model",rawName:"v-model",value:e.currentValue,expression:"currentValue"}],staticClass:"material-input",attrs:{name:e.name,placeholder:e.fillPlaceHolder,step:e.step,readonly:e.readonly,disabled:e.disabled,autocomplete:e.autoComplete,max:e.max,min:e.min,minlength:e.minlength,maxlength:e.maxlength,required:e.required,type:"number"},domProps:{value:e.currentValue},on:{focus:e.handleMdFocus,blur:e.handleMdBlur,input:[function(t){t.target.composing||(e.currentValue=t.target.value)},e.handleModelInput]}}):e._e(),e._v(" "),"password"===e.type?a("input",{directives:[{name:"model",rawName:"v-model",value:e.currentValue,expression:"currentValue"}],staticClass:"material-input",attrs:{name:e.name,placeholder:e.fillPlaceHolder,readonly:e.readonly,disabled:e.disabled,autocomplete:e.autoComplete,max:e.max,min:e.min,required:e.required,type:"password"},domProps:{value:e.currentValue},on:{focus:e.handleMdFocus,blur:e.handleMdBlur,input:[function(t){t.target.composing||(e.currentValue=t.target.value)},e.handleModelInput]}}):e._e(),e._v(" "),"tel"===e.type?a("input",{directives:[{name:"model",rawName:"v-model",value:e.currentValue,expression:"currentValue"}],staticClass:"material-input",attrs:{name:e.name,placeholder:e.fillPlaceHolder,readonly:e.readonly,disabled:e.disabled,autocomplete:e.autoComplete,required:e.required,type:"tel"},domProps:{value:e.currentValue},on:{focus:e.handleMdFocus,blur:e.handleMdBlur,input:[function(t){t.target.composing||(e.currentValue=t.target.value)},e.handleModelInput]}}):e._e(),e._v(" "),"text"===e.type?a("input",{directives:[{name:"model",rawName:"v-model",value:e.currentValue,expression:"currentValue"}],staticClass:"material-input",attrs:{name:e.name,placeholder:e.fillPlaceHolder,readonly:e.readonly,disabled:e.disabled,autocomplete:e.autoComplete,minlength:e.minlength,maxlength:e.maxlength,required:e.required,type:"text"},domProps:{value:e.currentValue},on:{focus:e.handleMdFocus,blur:e.handleMdBlur,input:[function(t){t.target.composing||(e.currentValue=t.target.value)},e.handleModelInput]}}):e._e(),e._v(" "),a("span",{staticClass:"material-input-bar"}),e._v(" "),a("label",{staticClass:"material-label"},[e._t("default")],2),e._v(" "),a("label",{staticClass:"material-label material-append-label"},[e._t("append")],2)])])},n=[],i=(a("163d"),{name:"MdInput",props:{icon:String,name:String,type:{type:String,default:"text"},value:[String,Number],placeholder:String,readonly:Boolean,disabled:Boolean,min:String,max:String,step:String,minlength:Number,maxlength:Number,required:{type:Boolean,default:!0},autoComplete:{type:String,default:"off"},validateEvent:{type:Boolean,default:!0}},data:function(){return{currentValue:this.value,focus:!1,fillPlaceHolder:null}},computed:{computedClasses:function(){return{"material--active":this.focus,"material--disabled":this.disabled,"material--raised":Boolean(this.focus||this.currentValue)}}},watch:{value:function(e){this.currentValue=e}},methods:{handleModelInput:function(e){var t=e.target.value;this.$emit("input",t),"ElFormItem"===this.$parent.$options.componentName&&this.validateEvent&&this.$parent.$emit("el.form.change",[t]),this.$emit("change",t)},handleMdFocus:function(e){this.focus=!0,this.$emit("focus",e),this.placeholder&&""!==this.placeholder&&(this.fillPlaceHolder=this.placeholder)},handleMdBlur:function(e){this.focus=!1,this.$emit("blur",e),this.fillPlaceHolder=null,"ElFormItem"===this.$parent.$options.componentName&&this.validateEvent&&this.$parent.$emit("el.form.blur",[this.currentValue])}}}),l=i,r=(a("07c7"),a("e90a")),o=Object(r["a"])(l,s,n,!1,null,"01325c60",null);t["a"]=o.exports},"3e7c":function(e,t,a){"use strict";var s=a("f6a3"),n=a.n(s);n.a},"3ec4":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"manegeBox",staticClass:"manage-box",class:{backgroundGray:e.overall}},[a("transition",{attrs:{name:"el-fade-in-linear"}},[e.overall?e._e():a("MDinput",{staticClass:"paperId-input",model:{value:e.paperId,callback:function(t){e.paperId=t},expression:"paperId"}},[a("span",[e._v("试卷编号")]),e._v(" "),a("span",{staticClass:"search-button",attrs:{slot:"append"},slot:"append"},[a("i",{staticClass:"el-icon-search",on:{click:e.search}})])])],1),e._v(" "),a("transition",{attrs:{name:"el-fade-in-linear"}},[e.overall?a("div",{staticClass:"t1"},[a("div",[a("el-button",{attrs:{icon:"el-icon-d-arrow-left"},on:{click:e.reset}},[e._v("返回搜索")]),e._v(" "),a("el-select",{attrs:{placeholder:"班级"},on:{change:e.changeClass},model:{value:e.classOption,callback:function(t){e.classOption=t},expression:"classOption"}},e._l(e.classes,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1),e._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:e.goMark}},[e._v("批卷 "),a("i",{staticClass:"el-icon-d-arrow-right"})])],1),e._v(" "),a("h2",{staticClass:"paper-title"},[e._v(e._s(e.config.paperTitle)+"统计结果")]),e._v(" "),a("panel-group",{attrs:{"show-arr":e.recordArr}}),e._v(" "),a("el-row",{attrs:{gutter:32}},[a("el-col",{attrs:{xs:24,sm:24,lg:8}},[a("div",{staticClass:"chart-wrapper"},[a("pie-chart",{attrs:{"chart-data-name":e.scoreLevel,"chart-data":e.scoreLevelPeople,title:"分数统计","tooltip-name":"人数(百分比)"}})],1)]),e._v(" "),a("el-col",{attrs:{xs:24,sm:24,lg:16}},[a("div",{staticClass:"chart-wrapper"},[a("bar-chart",{attrs:{"chart-data-name":e.types,"chart-data":e.typeScore,title:"各题平均分"}})],1)])],1),e._v(" "),a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-s-data"}),e._v(" 统计图")]),e._v(" "),a("rank-chart",{attrs:{"total-score":e.config.totalScore,"chart-data":e.examinee}})],1),e._v(" "),a("el-tab-pane",[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-s-grid"}),e._v(" 表格")]),e._v(" "),a("rank-table",{attrs:{"paper-id":e.paperId,"paper-title":e.config.paperTitle,"table-data":e.overall,"class-name":e.classOption},on:{deleteRecorded:e.deleteRecorded}})],1)],1)],1):e._e()])],1)},n=[],i=(a("c0c3"),a("9a33"),a("cc57"),a("1aba")),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticClass:"panel-group",attrs:{gutter:40}},[a("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[a("div",{staticClass:"card-panel",on:{click:function(t){return e.handleSetLineChartData("newVisitis")}}},[a("div",{staticClass:"card-panel-icon-wrapper icon-people"},[a("svg-icon",{attrs:{"icon-class":"peoples","class-name":"card-panel-icon"}})],1),e._v(" "),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[e._v("\n          考试人数\n        ")]),e._v(" "),a("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":e.showArr[0],duration:2600}})],1)])]),e._v(" "),a("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[a("div",{staticClass:"card-panel",on:{click:function(t){return e.handleSetLineChartData("messages")}}},[a("div",{staticClass:"card-panel-icon-wrapper icon-message"},[a("svg-icon",{attrs:{"icon-class":"first","class-name":"card-panel-icon"}})],1),e._v(" "),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[e._v("\n          最高分\n        ")]),e._v(" "),a("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":e.showArr[1],duration:3e3}})],1)])]),e._v(" "),a("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[a("div",{staticClass:"card-panel",on:{click:function(t){return e.handleSetLineChartData("purchases")}}},[a("div",{staticClass:"card-panel-icon-wrapper icon-money"},[a("svg-icon",{attrs:{"icon-class":"avg","class-name":"card-panel-icon"}})],1),e._v(" "),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[e._v("\n          平均分\n        ")]),e._v(" "),a("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":e.showArr[2],duration:3200,decimals:2}})],1)])]),e._v(" "),a("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[a("div",{staticClass:"card-panel",on:{click:function(t){return e.handleSetLineChartData("shoppings")}}},[a("div",{staticClass:"card-panel-icon-wrapper icon-shopping"},[a("svg-icon",{attrs:{"icon-class":"timer","class-name":"card-panel-icon"}})],1),e._v(" "),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[e._v("\n          平均用时\n        ")]),e._v(" "),a("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":e.showArr[3][0],duration:3600}}),e._v(" "),a("span",{staticClass:"time-separate"},[e._v(":")]),e._v(" "),a("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":e.showArr[3][1],duration:3600}}),e._v(" "),a("span",{staticClass:"time-separate"},[e._v(":")]),e._v(" "),a("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":e.showArr[3][2],duration:3600}})],1)])])],1)},r=[],o=a("9e2e"),c=a.n(o),u={components:{CountTo:c.a},props:{showArr:{type:Array,default:function(){return[]}}},methods:{handleSetLineChartData:function(e){this.$emit("handleSetLineChartData",e)}}},d=u,p=(a("3e7c"),a("e90a")),h=Object(p["a"])(d,l,r,!1,null,"95363e3c",null),m=h.exports,v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.className,style:{height:e.height,width:e.width}})},f=[],g=a("2389"),b=a.n(g),y=a("ed08"),x={data:function(){return{$_sidebarElm:null,$_resizeHandler:null}},mounted:function(){var e=this;this.$_resizeHandler=Object(y["a"])((function(){e.chart&&e.chart.resize()}),100),this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},beforeDestroy:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},activated:function(){this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},deactivated:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},methods:{$_initResizeEvent:function(){window.addEventListener("resize",this.$_resizeHandler)},$_destroyResizeEvent:function(){window.removeEventListener("resize",this.$_resizeHandler)},$_sidebarResizeHandler:function(e){"width"===e.propertyName&&this.$_resizeHandler()},$_initSidebarResizeEvent:function(){this.$_sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.$_sidebarElm&&this.$_sidebarElm.addEventListener("transitionend",this.$_sidebarResizeHandler)},$_destroySidebarResizeEvent:function(){this.$_sidebarElm&&this.$_sidebarElm.removeEventListener("transitionend",this.$_sidebarResizeHandler)}}};a("9c75");var _={mixins:[x],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"300px"},chartDataName:{type:Array,default:function(){return["Industries","Technology","Forex","Gold","Forecasts"]}},chartData:{type:Array,default:function(){return[320,240,149,100,59]}},title:{type:String,default:""},tooltipName:{type:String,default:"数据"}},data:function(){return{chart:null,showData:[]}},watch:{chartData:{handler:function(){this.formatData()},deep:!0,immediate:!0}},mounted:function(){},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=b.a.init(this.$el,"macarons"),this.chart.setOption({title:{text:this.title},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{left:"center",bottom:"10",data:this.chartDataName},series:[{name:this.tooltipName,type:"pie",roseType:"radius",radius:[15,95],center:["50%","38%"],data:this.showData,animationEasing:"cubicInOut",animationDuration:2600}]})},formatData:function(){var e=this;this.showData=[];for(var t=0,a=this.chartDataName.length;t<a;t++)this.showData.push({value:this.chartData[t],name:this.chartDataName[t]});this.$nextTick((function(){e.initChart()}))}}},w=_,C=Object(p["a"])(w,v,f,!1,null,null,null),E=C.exports,$=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.className,style:{height:e.height,width:e.width}})},S=[];a("9c75");var D={mixins:[x],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"300px"},chartDataName:{type:Array,default:function(){return["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]}},chartData:{type:Array,default:function(){return[120,200,150,80,70,110,130]}},title:{type:String,default:""},tooltipName:{type:String,default:"平均分"}},watch:{chartData:{handler:function(){var e=this;this.$nextTick((function(){e.initChart()}))},deep:!0,immediate:!0}},mounted:function(){},methods:{initChart:function(){this.chart=b.a.init(this.$el,"macarons"),this.chart.setOption({title:{text:this.title},tooltip:{trigger:"item",axisPointer:{type:"cross"}},yAxis:{type:"category",data:this.chartDataName,name:"题型"},xAxis:{type:"value",name:"平均分"},series:[{name:this.tooltipName,data:this.chartData,type:"bar",showBackground:!0,backgroundStyle:{color:"rgba(220, 220, 220, 0.8)"},animationEasing:"cubicInOut",animationDuration:2600}]})}}},I=D,k=Object(p["a"])(I,$,S,!1,null,null,null),N=k.exports,L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{staticStyle:{"margin-bottom":"15px"},attrs:{loading:e.downloadLoading,type:"success",size:"mini"},on:{click:e.downloadExcel}},[e._v("下载excel")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{type:"index",wdith:"50px",label:"序号",align:"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"头像",align:"center",width:"100px","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-image",{attrs:{src:t.row.user.headIcon||e.defaultHeadIcon,"preview-src-list":[t.row.user.headIcon||e.defaultHeadIcon]}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"user.name",label:"姓名",align:"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"user.school",label:"学校",align:"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"user.major",label:"专业",align:"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"user.class",label:"班级",align:"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"user.number",label:"学号",align:"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"scoreExam",label:"总分",sortable:"",align:"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"singlesExam",label:"单选题",sortable:"",align:"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"multiplesExam",label:"多选题",sortable:"",align:"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"judgesExam",label:"判断题",sortable:"",align:"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"completionsExam",label:"填空题",sortable:"",align:"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"essaysExam",label:"问答题",sortable:"",align:"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"startExam",label:"开考时间",align:"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"endExam",label:"交卷时间",align:"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"timeExam",label:"考试用时",align:"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center","show-overflow-tooltip":"",fixed:"right",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteRecord(t.row)}}},[e._v("删除")])]}}])})],1)],1)},T=[],M=a("5bc8"),V={mixins:[M["a"]],props:{tableData:{type:Array,default:function(){return!1}},paperId:{type:String,required:!0,default:""},paperTitle:{type:String,default:"默认标题"},className:{type:String,default:""}},data:function(){return{defaultHeadIcon:"",downloadLoading:!1}},created:function(){this.defaultHeadIcon=this.$store.getters.constant.defaultHeadIcon},methods:{deleteRecord:function(e){var t=this;this.$confirm("确定删除该考生的考试记录，删除之后该考生可再次考试？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a={eid:e.eid,paperId:t.paperId};t.execDelete(a)})).catch((function(){}))},execDelete:function(e){var t=this;this.$store.dispatch("exam/deleteExamRecord",e).then((function(a){t.$message.success("删除成功！"),t.$emit("deleteRecorded",e.paperId)}))},downloadExcel:function(){var e=this;this.downloadLoading=!0,Promise.all([a.e("chunk-87d7ce5a"),a.e("chunk-02216ce3"),a.e("chunk-2133cd4f")]).then(a.bind(null,"4bf8")).then((function(t){var a=["名次","姓名","学校","专业","班级","编号","总分","单选","多选","判断","填空","问答","开考时间","交卷时间","考试用时"],s=["rank","user.name","user.school","user.major","user.class","user.number","scoreExam","singlesExam","multiplesExam","judgesExam","completionsExam","essaysExam","startExam","endExam","timeExam"],n=e.tableData,i=e.formatJson(s,n),l=e.paperTitle+e.className+"班级成绩单";t.export_json_to_excel({header:a,data:i,filename:l,bookType:"xlsx"}),e.downloadLoading=!1}))},formatJson:function(e,t){return t.map((function(t,a){return e.map((function(e){if("timestamp"===e)return Object(y["c"])(t[e]);if("rank"===e)return a+1;if(-1!==e.indexOf(".")){var s=e.split("."),n=t;s.map((function(e){n=n[e]}));var i=n instanceof Object;return i?"表格无法存储对象":n}return t[e]}))}))}}},O=V,P=Object(p["a"])(O,L,T,!1,null,null,null),A=P.exports,z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.className,style:{height:e.height,width:e.width}})},H=[];a("163d");a("9c75");var q={mixins:[x],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"300px"},chartData:{type:Object,default:function(){return{}}},title:{type:String,default:""},tooltipName:{type:String,default:"分数"},totalScore:{type:Number,default:100}},watch:{chartData:{handler:function(){var e=this;this.$nextTick((function(){e.initChart()}))},deep:!0,immediate:!0}},mounted:function(){},methods:{initChart:function(){this.chart=b.a.init(this.$el,"macarons"),this.chart.setOption({title:{text:this.title},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{data:["单选题","多选题","判断题","填空题","问答题","总分"]},dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}],xAxis:[{type:"category",axisTick:{alignWithLabel:!0},data:this.chartData.name}],yAxis:[{type:"value",name:"分数",min:0,max:this.totalScore,position:"left",axisLine:{},axisLabel:{formatter:"{value}"}}],series:[{name:"单选题",type:"bar",data:this.chartData.singles},{name:"多选题",type:"bar",data:this.chartData.multiples},{name:"判断题",type:"bar",data:this.chartData.judges},{name:"填空题",type:"bar",data:this.chartData.completions},{name:"问答题",type:"bar",data:this.chartData.essays},{name:"总分",type:"line",data:this.chartData.total}]})}}},R=q,j=Object(p["a"])(R,z,H,!1,null,null,null),B=j.exports,F={components:{MDinput:i["a"],panelGroup:m,pieChart:E,barChart:N,rankTable:A,rankChart:B},data:function(){return{load:null,paperId:"p1585060038319",overall:"",backup:"",config:"",scoreLevelNumber:5,scoreLevel:[],scoreLevelPeople:[],examNumber:0,recordArr:[0,0,0,[0,0,0]],questionTypes:[],types:[],typeScore:[],examinee:{name:[],total:[],singles:[],multiples:[],judges:[],completions:[],essays:[]},allClass:"全部班级",classes:[],classOption:""}},created:function(){this.questionTypes=this.$store.getters.constant.question.types,this.classes.push(this.allClass),this.classOption=this.allClass},methods:{openLoad:function(){this.load=this.$loading({target:this.$refs["manegeBox"]})},closeLoad:function(){this.load&&this.load.close()},getExamOverall:function(){var e=this,t={paperId:this.paperId};this.$store.dispatch("exam/getExamOverallByPid",t).then((function(t){e.backup=t.data,e.overall=t.data,e.examNumber=e.overall.length,e.createClasses(),e.statistics()})).finally((function(){e.closeLoad()}))},getPaperDetail:function(){var e=this,t={paperId:this.paperId};this.$store.dispatch("paper/getPaperDetail",t).then((function(t){e.config=t.data.config,e.getExamOverall()})).catch((function(){e.closeLoad()}))},search:function(){if(!this.paperId)return this.$message.warning("请先输入试卷编号！"),!1;this.openLoad(),this.getPaperDetail()},statistics:function(){console.log("开始统计：",Date.now());for(var e=0,t=0,a=this.overall.length,s=this.config.totalScore/this.scoreLevelNumber,n=0,i=this.scoreLevelNumber;n<i;n++)this.scoreLevel.push("".concat(n*s,"~").concat((n+1)*s)),this.scoreLevelPeople.push(0);for(var l=0,r=this.questionTypes.length;l<r;l++)this.config[this.questionTypes[l].type]&&(this.types.push(this.questionTypes[l]),this.typeScore.push(0));for(var o=0;o<a;o++){e+=+this.overall[o].scoreExam,t+=this.formatTimeToSecond(this.overall[o].timeExam);var c=parseInt(+this.overall[o].scoreExam/s);c===this.scoreLevelNumber&&c--,this.scoreLevelPeople[c]++;for(var u=0,d=this.types.length;u<d;u++)this.typeScore[u]+=+this.overall[o][this.types[u].type+"Exam"];this.examinee.name.push(this.overall[o].user.name),this.examinee.total.push(this.overall[o].scoreExam);for(var p=0,h=this.questionTypes.length;p<h;p++)this.examinee[this.questionTypes[p].type].push(this.overall[o][this.questionTypes[p].type+"Exam"])}this.recordArr[0]=a||0,this.recordArr[1]=this.overall[0]&&this.overall[0].scoreExam||0,this.recordArr[2]=a&&e/a||0,this.recordArr[3]=a&&this.formatSecondToTime(parseInt(t/a))||[0,0,0];for(var m=0,v=this.types.length;m<v;m++)this.types[m]=this.types[m].name,this.typeScore[m]=this.typeScore[m]/a||0;console.log("结束统计：",Date.now())},formatTimeToSecond:function(e){var t=e.split(":");return 60*+t[0]*60+60*+t[1]+ +t[2]},formatSecondToTime:function(e){var t=[];return t[0]=parseInt(e/3600),t[1]=parseInt((e-3600*t[0])/60),t[2]=e%60,t},reset:function(){this.paperId="",this.overall="",this.config="",this.scoreLevelPeople=[],this.examNumber=0,this.recordArr=[0,0,0,[0,0,0]],this.types=[],this.typeScore=[],this.examinee={name:[],total:[],singles:[],multiples:[],judges:[],completions:[],essays:[]},this.classes=[],this.classes.push(this.allClass),this.classOption=this.allClass},goMark:function(){this.$router.push("/exam/mark?p="+this.paperId)},deleteRecorded:function(e){this.reset(),this.paperId=e,this.search()},createClasses:function(){for(var e=0,t=this.backup.length;e<t;e++){var a=this.backup[e].user.class;-1===this.classes.indexOf(a)&&this.classes.push(a)}},changeClass:function(e){this.overall="",e===this.allClass?this.overall=this.backup:this.overall=this.backup.filter((function(t){return t.user.class===e})),this.openLoad(),this.scoreLevelPeople=[],this.examNumber=this.overall.length,this.recordArr=[0,0,0,[0,0,0]],this.types=[],this.typeScore=[],this.examinee={name:[],total:[],singles:[],multiples:[],judges:[],completions:[],essays:[]},this.statistics(),this.closeLoad()}}},J=F,Y=(a("c56a"),Object(p["a"])(J,s,n,!1,null,"2404733f",null));t["default"]=Y.exports},"5bc8":function(e,t,a){"use strict";t["a"]={data:function(){return{load:null}},beforeMount:function(){},beforeDestroy:function(){},mounted:function(){},methods:{computedIndex:function(e){return(this.page-1)*this.pageSize+e+1},formatTime:function(e){return this.$moment(e).format("YYYY-MM-DD HH:mm:ss")},openLoad:function(e){this.load=this.$loading({target:e})},closeLoad:function(){this.load&&this.load.close()}}}},b6ee:function(e,t,a){},bcfc:function(e,t,a){},c56a:function(e,t,a){"use strict";var s=a("b6ee"),n=a.n(s);n.a},f6a3:function(e,t,a){}}]);