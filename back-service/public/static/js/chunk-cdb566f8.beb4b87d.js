(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cdb566f8"],{"07c7":function(t,e,a){"use strict";var s=a("bcfc"),n=a.n(s);n.a},"1aba":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"material-input__component",class:t.computedClasses},[a("div",{class:{iconClass:t.icon}},[t.icon?a("i",{staticClass:"el-input__icon material-input__icon",class:["el-icon-"+t.icon]}):t._e(),t._v(" "),"email"===t.type?a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentValue,expression:"currentValue"}],staticClass:"material-input",attrs:{name:t.name,placeholder:t.fillPlaceHolder,readonly:t.readonly,disabled:t.disabled,autocomplete:t.autoComplete,required:t.required,type:"email"},domProps:{value:t.currentValue},on:{focus:t.handleMdFocus,blur:t.handleMdBlur,input:[function(e){e.target.composing||(t.currentValue=e.target.value)},t.handleModelInput]}}):t._e(),t._v(" "),"url"===t.type?a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentValue,expression:"currentValue"}],staticClass:"material-input",attrs:{name:t.name,placeholder:t.fillPlaceHolder,readonly:t.readonly,disabled:t.disabled,autocomplete:t.autoComplete,required:t.required,type:"url"},domProps:{value:t.currentValue},on:{focus:t.handleMdFocus,blur:t.handleMdBlur,input:[function(e){e.target.composing||(t.currentValue=e.target.value)},t.handleModelInput]}}):t._e(),t._v(" "),"number"===t.type?a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentValue,expression:"currentValue"}],staticClass:"material-input",attrs:{name:t.name,placeholder:t.fillPlaceHolder,step:t.step,readonly:t.readonly,disabled:t.disabled,autocomplete:t.autoComplete,max:t.max,min:t.min,minlength:t.minlength,maxlength:t.maxlength,required:t.required,type:"number"},domProps:{value:t.currentValue},on:{focus:t.handleMdFocus,blur:t.handleMdBlur,input:[function(e){e.target.composing||(t.currentValue=e.target.value)},t.handleModelInput]}}):t._e(),t._v(" "),"password"===t.type?a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentValue,expression:"currentValue"}],staticClass:"material-input",attrs:{name:t.name,placeholder:t.fillPlaceHolder,readonly:t.readonly,disabled:t.disabled,autocomplete:t.autoComplete,max:t.max,min:t.min,required:t.required,type:"password"},domProps:{value:t.currentValue},on:{focus:t.handleMdFocus,blur:t.handleMdBlur,input:[function(e){e.target.composing||(t.currentValue=e.target.value)},t.handleModelInput]}}):t._e(),t._v(" "),"tel"===t.type?a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentValue,expression:"currentValue"}],staticClass:"material-input",attrs:{name:t.name,placeholder:t.fillPlaceHolder,readonly:t.readonly,disabled:t.disabled,autocomplete:t.autoComplete,required:t.required,type:"tel"},domProps:{value:t.currentValue},on:{focus:t.handleMdFocus,blur:t.handleMdBlur,input:[function(e){e.target.composing||(t.currentValue=e.target.value)},t.handleModelInput]}}):t._e(),t._v(" "),"text"===t.type?a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentValue,expression:"currentValue"}],staticClass:"material-input",attrs:{name:t.name,placeholder:t.fillPlaceHolder,readonly:t.readonly,disabled:t.disabled,autocomplete:t.autoComplete,minlength:t.minlength,maxlength:t.maxlength,required:t.required,type:"text"},domProps:{value:t.currentValue},on:{focus:t.handleMdFocus,blur:t.handleMdBlur,input:[function(e){e.target.composing||(t.currentValue=e.target.value)},t.handleModelInput]}}):t._e(),t._v(" "),a("span",{staticClass:"material-input-bar"}),t._v(" "),a("label",{staticClass:"material-label"},[t._t("default")],2),t._v(" "),a("label",{staticClass:"material-label material-append-label"},[t._t("append")],2)])])},n=[],i=(a("163d"),{name:"MdInput",props:{icon:String,name:String,type:{type:String,default:"text"},value:[String,Number],placeholder:String,readonly:Boolean,disabled:Boolean,min:String,max:String,step:String,minlength:Number,maxlength:Number,required:{type:Boolean,default:!0},autoComplete:{type:String,default:"off"},validateEvent:{type:Boolean,default:!0}},data:function(){return{currentValue:this.value,focus:!1,fillPlaceHolder:null}},computed:{computedClasses:function(){return{"material--active":this.focus,"material--disabled":this.disabled,"material--raised":Boolean(this.focus||this.currentValue)}}},watch:{value:function(t){this.currentValue=t}},methods:{handleModelInput:function(t){var e=t.target.value;this.$emit("input",e),"ElFormItem"===this.$parent.$options.componentName&&this.validateEvent&&this.$parent.$emit("el.form.change",[e]),this.$emit("change",e)},handleMdFocus:function(t){this.focus=!0,this.$emit("focus",t),this.placeholder&&""!==this.placeholder&&(this.fillPlaceHolder=this.placeholder)},handleMdBlur:function(t){this.focus=!1,this.$emit("blur",t),this.fillPlaceHolder=null,"ElFormItem"===this.$parent.$options.componentName&&this.validateEvent&&this.$parent.$emit("el.form.blur",[this.currentValue])}}}),l=i,r=(a("07c7"),a("e90a")),o=Object(r["a"])(l,s,n,!1,null,"01325c60",null);e["a"]=o.exports},2986:function(t,e,a){"use strict";var s=a("d0be"),n=a.n(s);n.a},"3e7c":function(t,e,a){"use strict";var s=a("f6a3"),n=a.n(s);n.a},"3ec4":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"manegeBox",staticClass:"manage-box",class:{backgroundGray:t.overall}},[a("transition",{attrs:{name:"el-fade-in-linear"}},[t.overall?t._e():a("MDinput",{staticClass:"paperId-input",model:{value:t.paperId,callback:function(e){t.paperId=e},expression:"paperId"}},[a("span",[t._v("试卷编号")]),t._v(" "),a("span",{staticClass:"search-button",attrs:{slot:"append"},slot:"append"},[a("i",{staticClass:"el-icon-search",on:{click:t.search}})])])],1),t._v(" "),a("transition",{attrs:{name:"el-fade-in-linear"}},[t.overall?a("div",{staticClass:"t1"},[a("div",[a("el-button",{attrs:{icon:"el-icon-d-arrow-left"},on:{click:t.reset}},[t._v("返回搜索")]),t._v(" "),a("el-select",{attrs:{placeholder:"班级"},on:{change:t.changeClass},model:{value:t.classOption,callback:function(e){t.classOption=e},expression:"classOption"}},t._l(t.classes,(function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})})),1),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:t.goMark}},[t._v("批卷 "),a("i",{staticClass:"el-icon-d-arrow-right"})])],1),t._v(" "),a("h2",{staticClass:"paper-title"},[t._v(t._s(t.config.paperTitle)+"统计结果")]),t._v(" "),a("panel-group",{attrs:{"show-arr":t.recordArr}}),t._v(" "),a("el-row",{attrs:{gutter:32}},[a("el-col",{attrs:{xs:24,sm:24,lg:8}},[a("div",{staticClass:"chart-wrapper"},[a("pie-chart",{attrs:{"chart-data-name":t.scoreLevel,"chart-data":t.scoreLevelPeople,title:"分数统计","tooltip-name":"人数(百分比)"}})],1)]),t._v(" "),a("el-col",{attrs:{xs:24,sm:24,lg:16}},[a("div",{staticClass:"chart-wrapper"},[a("bar-chart",{attrs:{"chart-data-name":t.types,"chart-data":t.typeScore,title:"各题平均分"}})],1)])],1),t._v(" "),a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-s-data"}),t._v(" 统计图")]),t._v(" "),a("rank-chart",{attrs:{"total-score":t.config.totalScore,"chart-data":t.examinee}})],1),t._v(" "),a("el-tab-pane",[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-s-grid"}),t._v(" 表格")]),t._v(" "),a("rank-table",{attrs:{"paper-id":t.paperId,"paper-title":t.config.paperTitle,"table-data":t.overall,"class-name":t.classOption},on:{deleteRecorded:t.deleteRecorded}})],1)],1)],1):t._e()])],1)},n=[],i=(a("c0c3"),a("9a33"),a("cc57"),a("1aba")),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{staticClass:"panel-group",attrs:{gutter:40}},[a("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[a("div",{staticClass:"card-panel",on:{click:function(e){return t.handleSetLineChartData("newVisitis")}}},[a("div",{staticClass:"card-panel-icon-wrapper icon-people"},[a("svg-icon",{attrs:{"icon-class":"peoples","class-name":"card-panel-icon"}})],1),t._v(" "),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v("\n          考试人数\n        ")]),t._v(" "),a("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":t.showArr[0],duration:2600}})],1)])]),t._v(" "),a("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[a("div",{staticClass:"card-panel",on:{click:function(e){return t.handleSetLineChartData("messages")}}},[a("div",{staticClass:"card-panel-icon-wrapper icon-message"},[a("svg-icon",{attrs:{"icon-class":"first","class-name":"card-panel-icon"}})],1),t._v(" "),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v("\n          最高分\n        ")]),t._v(" "),a("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":t.showArr[1],duration:3e3}})],1)])]),t._v(" "),a("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[a("div",{staticClass:"card-panel",on:{click:function(e){return t.handleSetLineChartData("purchases")}}},[a("div",{staticClass:"card-panel-icon-wrapper icon-money"},[a("svg-icon",{attrs:{"icon-class":"avg","class-name":"card-panel-icon"}})],1),t._v(" "),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v("\n          平均分\n        ")]),t._v(" "),a("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":t.showArr[2],duration:3200,decimals:2}})],1)])]),t._v(" "),a("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[a("div",{staticClass:"card-panel",on:{click:function(e){return t.handleSetLineChartData("shoppings")}}},[a("div",{staticClass:"card-panel-icon-wrapper icon-shopping"},[a("svg-icon",{attrs:{"icon-class":"timer","class-name":"card-panel-icon"}})],1),t._v(" "),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v("\n          平均用时\n        ")]),t._v(" "),a("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":t.showArr[3][0],duration:3600}}),t._v(" "),a("span",{staticClass:"time-separate"},[t._v(":")]),t._v(" "),a("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":t.showArr[3][1],duration:3600}}),t._v(" "),a("span",{staticClass:"time-separate"},[t._v(":")]),t._v(" "),a("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":t.showArr[3][2],duration:3600}})],1)])])],1)},r=[],o=a("9e2e"),c=a.n(o),u={components:{CountTo:c.a},props:{showArr:{type:Array,default:function(){return[]}}},methods:{handleSetLineChartData:function(t){this.$emit("handleSetLineChartData",t)}}},d=u,p=(a("3e7c"),a("e90a")),h=Object(p["a"])(d,l,r,!1,null,"95363e3c",null),m=h.exports,v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.className,style:{height:t.height,width:t.width}})},f=[],g=a("2389"),b=a.n(g),y=a("ed08"),x={data:function(){return{$_sidebarElm:null,$_resizeHandler:null}},mounted:function(){var t=this;this.$_resizeHandler=Object(y["a"])((function(){t.chart&&t.chart.resize()}),100),this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},beforeDestroy:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},activated:function(){this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},deactivated:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},methods:{$_initResizeEvent:function(){window.addEventListener("resize",this.$_resizeHandler)},$_destroyResizeEvent:function(){window.removeEventListener("resize",this.$_resizeHandler)},$_sidebarResizeHandler:function(t){"width"===t.propertyName&&this.$_resizeHandler()},$_initSidebarResizeEvent:function(){this.$_sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.$_sidebarElm&&this.$_sidebarElm.addEventListener("transitionend",this.$_sidebarResizeHandler)},$_destroySidebarResizeEvent:function(){this.$_sidebarElm&&this.$_sidebarElm.removeEventListener("transitionend",this.$_sidebarResizeHandler)}}};a("9c75");var _={mixins:[x],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"300px"},chartDataName:{type:Array,default:function(){return["Industries","Technology","Forex","Gold","Forecasts"]}},chartData:{type:Array,default:function(){return[320,240,149,100,59]}},title:{type:String,default:""},tooltipName:{type:String,default:"数据"}},data:function(){return{chart:null,showData:[]}},watch:{chartData:{handler:function(){this.formatData()},deep:!0,immediate:!0}},mounted:function(){},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=b.a.init(this.$el,"macarons"),this.chart.setOption({title:{text:this.title},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{left:"center",bottom:"10",data:this.chartDataName},series:[{name:this.tooltipName,type:"pie",roseType:"radius",radius:[15,95],center:["50%","38%"],data:this.showData,animationEasing:"cubicInOut",animationDuration:2600}]})},formatData:function(){var t=this;this.showData=[];for(var e=0,a=this.chartDataName.length;e<a;e++)this.showData.push({value:this.chartData[e],name:this.chartDataName[e]});this.$nextTick((function(){t.initChart()}))}}},w=_,C=Object(p["a"])(w,v,f,!1,null,null,null),E=C.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.className,style:{height:t.height,width:t.width}})},S=[];a("9c75");var D={mixins:[x],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"300px"},chartDataName:{type:Array,default:function(){return["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]}},chartData:{type:Array,default:function(){return[120,200,150,80,70,110,130]}},title:{type:String,default:""},tooltipName:{type:String,default:"平均分"}},watch:{chartData:{handler:function(){var t=this;this.$nextTick((function(){t.initChart()}))},deep:!0,immediate:!0}},mounted:function(){},methods:{initChart:function(){this.chart=b.a.init(this.$el,"macarons"),this.chart.setOption({title:{text:this.title},tooltip:{trigger:"item",axisPointer:{type:"cross"}},yAxis:{type:"category",data:this.chartDataName,name:"题型"},xAxis:{type:"value",name:"平均分"},series:[{name:this.tooltipName,data:this.chartData,type:"bar",showBackground:!0,backgroundStyle:{color:"rgba(220, 220, 220, 0.8)"},animationEasing:"cubicInOut",animationDuration:2600}]})}}},I=D,k=Object(p["a"])(I,$,S,!1,null,null,null),N=k.exports,L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-button",{staticStyle:{"margin-bottom":"15px"},attrs:{loading:t.downloadLoading,type:"success",size:"mini"},on:{click:t.downloadExcel}},[t._v("下载excel")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{type:"index",wdith:"50px",label:"序号",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{label:"头像",align:"center",width:"100px","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-image",{attrs:{src:e.row.user.headIcon||t.defaultHeadIcon,"preview-src-list":[e.row.user.headIcon||t.defaultHeadIcon]}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"user.name",label:"姓名",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"user.school",label:"学校",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"user.major",label:"专业",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"user.class",label:"班级",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"user.number",label:"学号",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"scoreExam",label:"总分",sortable:"",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"singlesExam",label:"单选题",sortable:"",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"multiplesExam",label:"多选题",sortable:"",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"judgesExam",label:"判断题",sortable:"",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"completionsExam",label:"填空题",sortable:"",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"essaysExam",label:"问答题",sortable:"",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"startExam",label:"开考时间",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"endExam",label:"交卷时间",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"timeExam",label:"考试用时",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center","show-overflow-tooltip":"",fixed:"right",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.deleteRecord(e.row)}}},[t._v("删除")])]}}])})],1)],1)},T=[],M=a("5bc8"),V={mixins:[M["a"]],props:{tableData:{type:Array,default:function(){return!1}},paperId:{type:String,required:!0,default:""},paperTitle:{type:String,default:"默认标题"},className:{type:String,default:""}},data:function(){return{defaultHeadIcon:"",downloadLoading:!1}},created:function(){this.defaultHeadIcon=this.$store.getters.constant.defaultHeadIcon},methods:{deleteRecord:function(t){var e=this;this.$confirm("确定删除该考生的考试记录，删除之后该考生可再次考试？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a={eid:t.eid,paperId:e.paperId};e.execDelete(a)})).catch((function(){}))},execDelete:function(t){var e=this;this.$store.dispatch("exam/deleteExamRecord",t).then((function(a){e.$message.success("删除成功！"),e.$emit("deleteRecorded",t.paperId)}))},downloadExcel:function(){var t=this;this.downloadLoading=!0,Promise.all([a.e("chunk-87d7ce5a"),a.e("chunk-02216ce3"),a.e("chunk-2133cd4f")]).then(a.bind(null,"4bf8")).then((function(e){var a=["名次","姓名","学校","专业","班级","编号","总分","单选","多选","判断","填空","问答","开考时间","交卷时间","考试用时"],s=["rank","user.name","user.school","user.major","user.class","user.number","scoreExam","singlesExam","multiplesExam","judgesExam","completionsExam","essaysExam","startExam","endExam","timeExam"],n=t.tableData,i=t.formatJson(s,n),l=t.paperTitle+t.className+"班级成绩单";e.export_json_to_excel({header:a,data:i,filename:l,bookType:"xlsx"}),t.downloadLoading=!1}))},formatJson:function(t,e){return e.map((function(e,a){return t.map((function(t){if("timestamp"===t)return Object(y["c"])(e[t]);if("rank"===t)return a+1;if(-1!==t.indexOf(".")){var s=t.split("."),n=e;s.map((function(t){n=n[t]}));var i=n instanceof Object;return i?"表格无法存储对象":n}return e[t]}))}))}}},O=V,P=Object(p["a"])(O,L,T,!1,null,null,null),A=P.exports,z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.className,style:{height:t.height,width:t.width}})},H=[];a("163d");a("9c75");var q={mixins:[x],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"300px"},chartData:{type:Object,default:function(){return{}}},title:{type:String,default:""},tooltipName:{type:String,default:"分数"},totalScore:{type:Number,default:100}},watch:{chartData:{handler:function(){var t=this;this.$nextTick((function(){t.initChart()}))},deep:!0,immediate:!0}},mounted:function(){},methods:{initChart:function(){this.chart=b.a.init(this.$el,"macarons"),this.chart.setOption({title:{text:this.title},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{data:["单选题","多选题","判断题","填空题","问答题","总分"]},dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}],xAxis:[{type:"category",axisTick:{alignWithLabel:!0},data:this.chartData.name}],yAxis:[{type:"value",name:"分数",min:0,max:this.totalScore,position:"left",axisLine:{},axisLabel:{formatter:"{value}"}}],series:[{name:"单选题",type:"bar",data:this.chartData.singles},{name:"多选题",type:"bar",data:this.chartData.multiples},{name:"判断题",type:"bar",data:this.chartData.judges},{name:"填空题",type:"bar",data:this.chartData.completions},{name:"问答题",type:"bar",data:this.chartData.essays},{name:"总分",type:"line",data:this.chartData.total}]})}}},R=q,j=Object(p["a"])(R,z,H,!1,null,null,null),B=j.exports,F={components:{MDinput:i["a"],panelGroup:m,pieChart:E,barChart:N,rankTable:A,rankChart:B},data:function(){return{load:null,paperId:"p1585060038319",overall:"",backup:"",config:"",scoreLevelNumber:5,scoreLevel:[],scoreLevelPeople:[],examNumber:0,recordArr:[0,0,0,[0,0,0]],questionTypes:[],types:[],typeScore:[],examinee:{name:[],total:[],singles:[],multiples:[],judges:[],completions:[],essays:[]},allClass:"全部班级",classes:[],classOption:""}},created:function(){this.questionTypes=this.$store.getters.constant.question.types,this.classes.push(this.allClass),this.classOption=this.allClass},methods:{openLoad:function(){this.load||(this.load=this.$loading({target:this.$refs["manegeBox"]}))},closeLoad:function(){this.load&&(this.load.close(),this.load=null)},getExamOverall:function(){var t=this,e={paperId:this.paperId};this.$store.dispatch("exam/getExamOverallByPid",e).then((function(e){t.backup=e.data,t.overall=e.data,t.examNumber=t.overall.length,t.createClasses(),t.statistics()})).finally((function(){t.closeLoad()}))},getPaperDetail:function(){var t=this,e={paperId:this.paperId};this.$store.dispatch("paper/getPaperDetail",e).then((function(e){t.config=e.data.config,t.getExamOverall()})).catch((function(){t.closeLoad()}))},search:function(){if(!this.paperId)return this.$message.warning("请先输入试卷编号！"),!1;this.openLoad(),this.getPaperDetail()},statistics:function(){console.log("开始统计：",Date.now());for(var t=0,e=0,a=this.overall.length,s=this.config.totalScore/this.scoreLevelNumber,n=0,i=this.scoreLevelNumber;n<i;n++)this.scoreLevel.push("".concat(n*s,"~").concat((n+1)*s)),this.scoreLevelPeople.push(0);for(var l=0,r=this.questionTypes.length;l<r;l++)this.config[this.questionTypes[l].type]&&(this.types.push(this.questionTypes[l]),this.typeScore.push(0));for(var o=0;o<a;o++){t+=+this.overall[o].scoreExam,e+=this.formatTimeToSecond(this.overall[o].timeExam);var c=parseInt(+this.overall[o].scoreExam/s);c===this.scoreLevelNumber&&c--,this.scoreLevelPeople[c]++;for(var u=0,d=this.types.length;u<d;u++)this.typeScore[u]+=+this.overall[o][this.types[u].type+"Exam"];this.examinee.name.push(this.overall[o].user.name),this.examinee.total.push(this.overall[o].scoreExam);for(var p=0,h=this.questionTypes.length;p<h;p++)this.examinee[this.questionTypes[p].type].push(this.overall[o][this.questionTypes[p].type+"Exam"])}this.recordArr[0]=a||0,this.recordArr[1]=this.overall[0]&&this.overall[0].scoreExam||0,this.recordArr[2]=a&&t/a||0,this.recordArr[3]=a&&this.formatSecondToTime(parseInt(e/a))||[0,0,0];for(var m=0,v=this.types.length;m<v;m++)this.types[m]=this.types[m].name,this.typeScore[m]=this.typeScore[m]/a||0;console.log("结束统计：",Date.now())},formatTimeToSecond:function(t){var e=t.split(":");return 60*+e[0]*60+60*+e[1]+ +e[2]},formatSecondToTime:function(t){var e=[];return e[0]=parseInt(t/3600),e[1]=parseInt((t-3600*e[0])/60),e[2]=t%60,e},reset:function(){this.paperId="",this.overall="",this.config="",this.scoreLevelPeople=[],this.examNumber=0,this.recordArr=[0,0,0,[0,0,0]],this.types=[],this.typeScore=[],this.examinee={name:[],total:[],singles:[],multiples:[],judges:[],completions:[],essays:[]},this.classes=[],this.classes.push(this.allClass),this.classOption=this.allClass},goMark:function(){this.$router.push("/exam/mark?p="+this.paperId)},deleteRecorded:function(t){this.reset(),this.paperId=t,this.search()},createClasses:function(){for(var t=0,e=this.backup.length;t<e;t++){var a=this.backup[t].user.class;-1===this.classes.indexOf(a)&&this.classes.push(a)}},changeClass:function(t){this.overall="",t===this.allClass?this.overall=this.backup:this.overall=this.backup.filter((function(e){return e.user.class===t})),this.openLoad(),this.scoreLevelPeople=[],this.examNumber=this.overall.length,this.recordArr=[0,0,0,[0,0,0]],this.types=[],this.typeScore=[],this.examinee={name:[],total:[],singles:[],multiples:[],judges:[],completions:[],essays:[]},this.statistics(),this.closeLoad()}}},J=F,Y=(a("2986"),Object(p["a"])(J,s,n,!1,null,"304ab5bb",null));e["default"]=Y.exports},"5bc8":function(t,e,a){"use strict";e["a"]={data:function(){return{load:null}},beforeMount:function(){},beforeDestroy:function(){},mounted:function(){},methods:{computedIndex:function(t){return(this.page-1)*this.pageSize+t+1},formatTime:function(t){return this.$moment(t).format("YYYY-MM-DD HH:mm:ss")},openLoad:function(t){this.load=this.$loading({target:t})},closeLoad:function(){this.load&&this.load.close()}}}},bcfc:function(t,e,a){},d0be:function(t,e,a){},f6a3:function(t,e,a){}}]);