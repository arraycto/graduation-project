(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-73f7b61b"],{2017:function(e,r,s){"use strict";var t=s("98c1"),o=s.n(t);o.a},"30e7":function(e,r,s){"use strict";var t=s("436c"),o=s.n(t);o.a},"436c":function(e,r,s){},"5bc8":function(e,r,s){"use strict";r["a"]={data:function(){return{load:null}},beforeMount:function(){},beforeDestroy:function(){},mounted:function(){},methods:{computedIndex:function(e){return(this.page-1)*this.pageSize+e+1},formatTime:function(e){return this.$moment(e).format("YYYY-MM-DD HH:mm:ss")},openLoad:function(e){this.load=this.$loading({target:e})},closeLoad:function(){this.load&&this.load.close()}}}},"74b3":function(e,r,s){"use strict";var t=s("aeab"),o=s.n(t);o.a},"79bd":function(e,r,s){"use strict";var t=s("fab0"),o=s.n(t);o.a},"98c1":function(e,r,s){},"9ed6":function(e,r,s){"use strict";s.r(r);var t=function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",{staticClass:"login-container"},[s("img",{staticClass:"bg",attrs:{src:e.bg}}),e._v(" "),s("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules,"auto-complete":"on","label-position":"left"}},[s("div",{staticClass:"title-container"},[s("h3",{staticClass:"title"},[e._v("在线考试系统")])]),e._v(" "),s("el-form-item",{attrs:{prop:"username"}},[s("span",{staticClass:"svg-container"},[s("svg-icon",{attrs:{"icon-class":"user"}})],1),e._v(" "),s("el-input",{ref:"username",attrs:{placeholder:"账号",name:"username",type:"text",tabindex:"1","auto-complete":"on"},model:{value:e.loginForm.username,callback:function(r){e.$set(e.loginForm,"username",r)},expression:"loginForm.username"}})],1),e._v(" "),s("el-form-item",{attrs:{prop:"password"}},[s("span",{staticClass:"svg-container"},[s("svg-icon",{attrs:{"icon-class":"password"}})],1),e._v(" "),s("el-input",{key:e.passwordType,ref:"password",attrs:{type:e.passwordType,placeholder:"密码",name:"password",tabindex:"2","auto-complete":"on"},nativeOn:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.handleLogin(r)}},model:{value:e.loginForm.password,callback:function(r){e.$set(e.loginForm,"password",r)},expression:"loginForm.password"}}),e._v(" "),s("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[s("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)],1),e._v(" "),s("el-button",{staticStyle:{width:"100%","margin-bottom":"30px"},attrs:{loading:e.loading,type:"primary"},nativeOn:{click:function(r){return r.preventDefault(),e.handleLogin(r)}}},[e._v("登录")]),e._v(" "),s("div",{staticClass:"tips"},[s("span",[e._v(" 没有账号? "),s("span",{staticClass:"link",on:{click:e.goRegister}},[e._v("快去注册")])])])],1),e._v(" "),s("el-dialog",{attrs:{title:"注册",visible:e.drawer},on:{"update:visible":function(r){e.drawer=r},closed:e.closeDialog}},[s("register",{ref:"register",on:{registerSuccess:e.registerSuccess}})],1)],1)},o=[],a=function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",{staticClass:"register-box"},[s("el-form",{ref:"registerForm",attrs:{model:e.userInfo,rules:e.rules,"label-width":"80","label-position":"right"}},[s("el-scrollbar",{staticClass:"register-scrollbar"},[s("el-form-item",{attrs:{label:"账号",prop:"account"}},[s("el-input",{attrs:{placeholder:"请输入您的账号(建议使用学号)"},model:{value:e.userInfo.account,callback:function(r){e.$set(e.userInfo,"account",r)},expression:"userInfo.account"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"姓名",prop:"name"}},[s("el-input",{attrs:{placeholder:"请输入您的姓名(建议使用真实姓名)"},model:{value:e.userInfo.name,callback:function(r){e.$set(e.userInfo,"name",r)},expression:"userInfo.name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"身份",prop:"role"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:e.userInfo.role,callback:function(r){e.$set(e.userInfo,"role",r)},expression:"userInfo.role"}},e._l(e.roleOptions,(function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),s("el-form-item",{attrs:{label:"学校",prop:"school"}},[s("el-input",{attrs:{placeholder:"请输入您的学校"},model:{value:e.userInfo.school,callback:function(r){e.$set(e.userInfo,"school",r)},expression:"userInfo.school"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"专业",prop:"major"}},[s("el-input",{attrs:{placeholder:"请输入您的专业"},model:{value:e.userInfo.major,callback:function(r){e.$set(e.userInfo,"major",r)},expression:"userInfo.major"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"班级",prop:"class"}},[s("el-input",{attrs:{placeholder:"请输入您的班级"},model:{value:e.userInfo.class,callback:function(r){e.$set(e.userInfo,"class",r)},expression:"userInfo.class"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"学号",prop:"number"}},[s("el-input",{attrs:{placeholder:"请输入您的学号"},model:{value:e.userInfo.number,callback:function(r){e.$set(e.userInfo,"number",r)},expression:"userInfo.number"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"年龄",prop:"age"}},[s("el-input",{attrs:{type:"number",placeholder:"请输入您的年龄"},model:{value:e.userInfo.age,callback:function(r){e.$set(e.userInfo,"age",e._n(r))},expression:"userInfo.age"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"性别",prop:"sex"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:e.userInfo.sex,callback:function(r){e.$set(e.userInfo,"sex",r)},expression:"userInfo.sex"}},e._l(e.sexOptions,(function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),s("el-form-item",{attrs:{label:"密码",prop:"password"}},[s("el-input",{attrs:{placeholder:"请输入密码",type:"password","show-password":""},model:{value:e.userInfo.password,callback:function(r){e.$set(e.userInfo,"password",r)},expression:"userInfo.password"}})],1)],1),e._v(" "),s("div",{staticClass:"form-button"},[s("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("注册")]),e._v(" "),s("el-button",{on:{click:e.resetForm}},[e._v("重置")])],1)],1)],1)},n=[],l=s("5bc8"),i={name:"Register",components:{},mixins:[l["a"]],data:function(){return{userInfo:{account:"",name:"",role:"",school:"",major:"",class:"",number:"",age:"",sex:"",password:""},rules:{account:[{required:!0,message:"请输入账号",tigger:"blur"},{pattern:/^[a-z0-9A-Z]+$/,message:"只允许存在字母和数数字"}],name:[{required:!0,message:"请输入姓名",tigger:"blur"}],role:[{required:!0,message:"请选择职业",tigger:"blur"}],school:[{required:!0,message:"请输入学校",tigger:"blur"}],major:[{required:!0,message:"请输入专业",tigger:"blur"}],class:[{required:!0,message:"请输入班级",tigger:"blur"}],number:[{required:!0,message:"请输入学号",tigger:"blur"}],age:[{type:"number",message:"年龄必须为数字值"},{required:!0,type:"number",message:"请输入年龄",tigger:"blur"}],sex:[{required:!0,message:"请输入性别",tigger:"blur"}],password:[{required:!0,message:"请输入密码",tigger:"blur"},{pattern:/^[a-z0-9A-Z]+$/,message:"只允许存在字母和数数字"}]},roleOptions:[{value:"T",label:"教师"},{value:"S",label:"学生"}],sexOptions:[{value:"0",label:"女"},{value:"1",label:"男"}]}},methods:{resetForm:function(){this.$refs["registerForm"].resetFields()},submitForm:function(){var e=this;this.$refs["registerForm"].validate().then((function(r){var s={};for(var t in e.userInfo){var o=e.userInfo[t]+"";s[t]=o?o.trim():o}return e.openLoad(),e.$store.dispatch("user/register",e.userInfo)})).then((function(r){e.closeLoad(),200===r.code&&(e.$message({message:"注册成功，快去登录吧",type:"success"}),e.$refs["registerForm"].resetFields(),e.$emit("registerSuccess"))})).catch((function(r){if(e.closeLoad(),!1!==r)return!1;e.$message({message:"请先将表单填写完整再提交",type:"warning"})}))}}},u=i,c=(s("74b3"),s("79bd"),s("e90a")),p=Object(c["a"])(u,a,n,!1,null,"68f63a78",null),m=p.exports,d={name:"Login",components:{register:m},data:function(){var e=function(e,r,s){r?s():s(new Error("请输入账号"))},r=function(e,r,s){r?s():s(new Error("请输入密码"))};return{loginForm:{username:"t123456789",password:"t123456789"},loginRules:{username:[{required:!0,trigger:"blur",validator:e}],password:[{required:!0,trigger:"blur",validator:r}]},loading:!1,passwordType:"password",redirect:void 0,drawer:!1,bg:""}},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},created:function(){this.bg=s("f2c8")},methods:{showPwd:function(){var e=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){e.$refs.password.focus()}))},handleLogin:function(){var e=this;this.$refs.loginForm.validate((function(r){if(!r)return console.log("error submit!!"),!1;e.loading=!0;var s={};for(var t in e.loginForm)s[t]=e.loginForm[t].trim();e.$store.dispatch("user/login",s).then((function(){e.$router.push({path:e.redirect||"/"}),e.loading=!1})).catch((function(){e.loading=!1}))}))},goRegister:function(){this.drawer=!0},closeDialog:function(){this.$refs["register"].resetForm()},registerSuccess:function(){this.drawer=!1}}},f=d,g=(s("2017"),s("30e7"),Object(c["a"])(f,t,o,!1,null,"54e1b9b0",null));r["default"]=g.exports},aeab:function(e,r,s){},f2c8:function(e,r,s){e.exports=s.p+"static/img/bg.dcb73929.jpg"},fab0:function(e,r,s){}}]);