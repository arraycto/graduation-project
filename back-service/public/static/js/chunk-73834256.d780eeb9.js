(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-73834256"],{1209:function(e,t,n){},1226:function(e,t,n){},"163d":function(e,t,n){"use strict";var s=n("e7ad"),i=n("e042"),r=n("75c4"),o=n("1e5b"),a=n("94b3"),c=n("238a"),u=n("2ea2").f,l=n("dcb7").f,p=n("064e").f,h=n("777a").trim,f="Number",d=s[f],m=d,x=d.prototype,v=r(n("e005")(x))==f,g="trim"in String.prototype,b=function(e){var t=a(e,!1);if("string"==typeof t&&t.length>2){t=g?t.trim():h(t,3);var n,s,i,r=t.charCodeAt(0);if(43===r||45===r){if(n=t.charCodeAt(2),88===n||120===n)return NaN}else if(48===r){switch(t.charCodeAt(1)){case 66:case 98:s=2,i=49;break;case 79:case 111:s=8,i=55;break;default:return+t}for(var o,c=t.slice(2),u=0,l=c.length;u<l;u++)if(o=c.charCodeAt(u),o<48||o>i)return NaN;return parseInt(c,s)}}return+t};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof d&&(v?c((function(){x.valueOf.call(n)})):r(n)!=f)?o(new m(b(t)),n,d):b(t)};for(var y,w=n("149f")?u(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),_=0;w.length>_;_++)i(m,y=w[_])&&!i(d,y)&&p(d,y,l(m,y));d.prototype=x,x.constructor=d,n("bf16")(s,f,d)}},"2bf2":function(e,t,n){"use strict";var s=n("948c"),i=n.n(s);i.a},"31b8":function(e,t,n){"use strict";var s=n("f4f9"),i=n.n(s);i.a},"6b7c":function(e,t,n){"use strict";var s=n("1209"),i=n.n(s);i.a},"777a":function(e,t,n){var s=n("e46b"),i=n("f6b4"),r=n("238a"),o=n("9769"),a="["+o+"]",c="​",u=RegExp("^"+a+a+"*"),l=RegExp(a+a+"*$"),p=function(e,t,n){var i={},a=r((function(){return!!o[e]()||c[e]()!=c})),u=i[e]=a?t(h):o[e];n&&(i[n]=u),s(s.P+s.F*a,"String",i)},h=p.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(u,"")),2&t&&(e=e.replace(l,"")),e};e.exports=p},"948c":function(e,t,n){},9769:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},a2cd:function(e,t,n){"use strict";var s=n("238a");e.exports=function(e,t){return!!e&&s((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},c904:function(e,t,n){"use strict";var s=n("e46b"),i=n("5daa"),r=n("008a"),o=n("238a"),a=[].sort,c=[1,2,3];s(s.P+s.F*(o((function(){c.sort(void 0)}))||!o((function(){c.sort(null)}))||!n("a2cd")(a)),"Array",{sort:function(e){return void 0===e?a.call(r(this)):a.call(r(this),i(e))}})},f4f9:function(e,t,n){},f902:function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"examination",staticClass:"examination-box"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[n("screenfull",{ref:"screenfull",staticClass:"right-menu-item hover-effect",attrs:{id:"screenfull"},on:{closeFull:e.closeFull}})],1),e._v(" "),n("div",[n("div",{staticClass:"tc"},[n("h2",[e._v(e._s(e.config.paperTitle))])]),e._v(" "),n("div",{staticClass:"tc"},[n("span",[e._v("试卷总分:"+e._s(e.config.totalScore))]),e._v("    "),n("span",[e._v("考试时间:"+e._s(e.config.time))])]),e._v(" "),n("div",{staticClass:"mt10 mb10"},[e._v("        "+e._s(e.config.text))])]),e._v(" "),n("el-container",[n("el-aside",{attrs:{width:"200px"}},[n("el-scrollbar",{staticStyle:{height:"500px"}},[n("el-menu",{staticStyle:{border:"0"},attrs:{"default-active":e.currentQuestionIndex,"unique-opened":!0},on:{select:e.selectMenuItem}},e._l(e.questionList,(function(t){return n("el-submenu",{key:t.index,attrs:{index:t.index}},[n("template",{slot:"title"},[n("i",{staticClass:"el-icon-s-promotion"}),e._v(e._s(t.index+"、"+t.name+"("+e.config[t.type+"Score"]+"分)"))]),e._v(" "),e._l(t.number,(function(s){return n("el-menu-item",{key:s,attrs:{index:t.type+"-"+s}},[e._v("题目"+e._s(s))])}))],2)})),1)],1)],1),e._v(" "),n("el-container",[n("el-main",[n("div",{staticStyle:{padding:"0 20px 0 100px"}},[n("el-button",{attrs:{icon:"el-icon-arrow-left",disabled:0===e.questionsIndex.indexOf(e.currentQuestionIndex)},on:{click:e.preQuestion}},[e._v("上一题")]),e._v(" "),e.config.time?n("timer",{ref:"timer",staticClass:"timer",attrs:{time:e.config.time},on:{timeout:function(t){return e.submitPaper(!0)}}}):e._e(),e._v(" "),n("el-button",{staticClass:"fr",attrs:{disabled:e.questionsIndex.indexOf(e.currentQuestionIndex)===e.questionsIndex.length-1},on:{click:e.nextQuestion}},[e._v("下一题 "),n("i",{staticClass:"el-icon-arrow-right"})]),e._v(" "),n("el-button",{staticClass:"fr",staticStyle:{"margin-right":"10px"},attrs:{icon:"el-icon-finished",type:"primary"},on:{click:function(t){return e.submitPaper(!1)}}},[e._v("交卷")])],1),e._v(" "),n("div",{staticStyle:{padding:"0 20px 0 100px"}},[e.questions[e.currentType]?n("question",{attrs:{issue:e.questions[e.currentType][e.currentIndex],type:e.currentType,index:+e.currentIndex,answers:e.answers}}):e._e()],1)])],1)],1)],1)},i=[],r=(n("f548"),n("9a33"),n("cc57"),n("b449"),n("e980"));n("6d57"),n("e10e");function o(e,t){for(var n in t)t[n].shift();for(var s={scoreExam:0,singlesExam:0,multiplesExam:0,judgesExam:0,completionsExam:0},i=[],r=["essays"],o=Object.keys(e).filter((function(e){return-1===r.indexOf(e)})),c=0,u=o.length;c<u;c++){var l="";switch(o[c]){case"singles":l=a(o[c],e,t);break;case"multiples":l=a(o[c],e,t);break;case"judges":l=a(o[c],e,t);break;case"completions":l=a(o[c],e,t);break;default:break}s.scoreExam+=l.score,s[o[c]+"Exam"]=l.score,i=i.concat(l.arr)}for(var p=0,h=r.length;p<h;p++){for(var f=t[r[p]],d=0,m=f.length;d<m;d++)delete f[d].isTrue;i=i.concat(f)}return{score:s,answerArr:i}}function a(e,t,n){var s={arr:[],score:0},i=t[e];return n[e].map((function(e){for(var t=0,n=i.length;t<n;t++)if(e.qid===i[t].qid){var r=e.mineAnswer.trim()===i[t].rightKey.trim();e.isTrue=r,r&&(e.score=i[t].score),s.score+=r?+i[t].score:0,s.arr.push(e);break}})),s}var c=n("e886"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"question"},[e.issue.content?n("div",[n("div",{domProps:{innerHTML:e._s(e.issue.content)}}),e._v(" "),e.issue[e.selectOptions[0]]?n("div",e._l(e.selectOptions,(function(t){return n("div",{key:t,staticClass:"flex-box"},[e.issue[t]?n("div",{staticStyle:{"line-height":"50px"}},[e._v(e._s(t)+"、")]):e._e(),e._v(" "),e.issue[t]?n("div",{domProps:{innerHTML:e._s(e.issue[t])}}):e._e()])})),0):e._e(),e._v(" "),n("div",{staticClass:"flex-box"},[e._m(0),e._v(" "),e.type===e.questionTypes[0].type?n("div",[n("el-radio-group",{on:{change:e.changeRadio},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},e._l(e.choiceOptions,(function(e){return n("el-radio-button",{key:e,attrs:{label:e}})})),1)],1):e.type===e.questionTypes[1].type?n("div",[n("el-checkbox-group",{on:{change:e.changeCheckbox},model:{value:e.checkboxGroup,callback:function(t){e.checkboxGroup=t},expression:"checkboxGroup"}},e._l(e.choiceOptions,(function(t){return n("el-checkbox-button",{key:t,attrs:{label:t}},[e._v(e._s(t))])})),1)],1):e.type===e.questionTypes[2].type?n("div",[n("el-radio-group",{on:{change:e.changeJudge},model:{value:e.judge,callback:function(t){e.judge=t},expression:"judge"}},e._l(e.judgeOptions,(function(e){return n("el-radio-button",{key:e,attrs:{label:e}})})),1)],1):e.type===e.questionTypes[3].type?n("div",e._l(e.issue.spaceNumber,(function(t){return n("el-input",{key:t,staticStyle:{"margin-bottom":"5px"},on:{input:e.changeCompletion},model:{value:e.completions[t-1],callback:function(n){e.$set(e.completions,t-1,n)},expression:"completions[item - 1]"}})})),1):n("div",{staticStyle:{flex:"1"}},[n("el-input",{attrs:{type:"textarea",autosize:"","show-word-limit":""},on:{input:e.changeTextarea},model:{value:e.textarea,callback:function(t){e.textarea=t},expression:"textarea"}})],1)])]):n("div",[e._v("暂无该题，请联系出卷人")])])},l=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"line-height":"40px",width:"50px"}},[n("strong",[e._v("答案：")])])}],p=(n("c904"),n("163d"),{props:{issue:{type:Object,default:function(){return{}}},type:{type:String,default:""},index:{type:Number,default:1},answers:{type:Object,default:function(){return{}}}},data:function(){return{selectOptions:[],singleOptions:[],judgeOptions:[],questionTypes:[],radio:"",checkboxGroup:[],judge:"",completions:[],textarea:""}},computed:{choiceOptions:function(){var e=this;return this.selectOptions.filter((function(t){return e.issue[t]}))}},watch:{issue:{handler:function(){this.radio="",this.checkboxGroup=[],this.judge="",this.completions=[],this.textarea="",this.type===this.questionTypes[0].type?this.radio=this.answers[this.type][this.index].mineAnswer:this.type===this.questionTypes[1].type?this.checkboxGroup=this.answers[this.type][this.index].mineAnswer.split(""):this.type===this.questionTypes[2].type?this.judge=this.answers[this.type][this.index].mineAnswer:this.type===this.questionTypes[3].type?this.completions=this.answers[this.type][this.index].mineAnswer.split(" "):this.textarea=this.answers[this.type][this.index].mineAnswer},deep:!0}},created:function(){this.selectOptions=this.$store.getters.constant.selectOptions,this.judgeOptions=this.$store.getters.constant.judgeOptions,this.questionTypes=this.$store.getters.constant.question.types},methods:{changeRadio:function(e){this.answers[this.type][this.index].mineAnswer=e},changeCheckbox:function(e){this.answers[this.type][this.index].mineAnswer=e.sort().join("")},changeJudge:function(e){this.answers[this.type][this.index].mineAnswer=e},changeCompletion:function(){this.answers[this.type][this.index].mineAnswer=this.completions.map((function(e){return e.trim()})).join(" ")},changeTextarea:function(e){this.answers[this.type][this.index].mineAnswer=e}}}),h=p,f=(n("2bf2"),n("e90a")),d=Object(f["a"])(h,u,l,!1,null,"c966b2be",null),m=d.exports,x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"timer-box"},[n("div",{staticClass:"time",class:{tip:e.seconds<=e.tipTime}},[e._v(e._s(e.formatTime(e.seconds)))])])},v=[],g={components:{},props:{time:{type:String,default:"00:00:00"}},data:function(){return{percentage:10,colors:[{color:"#f56c6c",percentage:20},{color:"#e6a23c",percentage:40},{color:"#5cb87a",percentage:60},{color:"#1989fa",percentage:80},{color:"#6f7ad3",percentage:100}],allTime:0,seconds:0,tipTime:0,timer:null}},created:function(){this.initSecond(),this.timing()},beforeDestroy:function(){this.timer&&clearInterval(this.timer)},methods:{initSecond:function(){var e=this.time.split(":");this.seconds=60*+e[0]*60+60*+e[1]+ +e[2],this.allTime=this.seconds,this.tipTime=.2*this.seconds},formatTime:function(e){var t=[];t[0]=parseInt(e/3600),t[1]=parseInt((e-3600*t[0])/60),t[2]=e%60;for(var n=0;n<t.length;n++)t[n]>9||(t[n]="0"+t[n]);return t.join(":")},timing:function(){var e=this;this.timer=setInterval((function(){!e.seconds&&e.timer?(clearInterval(e.timer),e.$emit("timeout")):e.seconds--}),1e3)},getUsedTime:function(){return this.formatTime(this.allTime-this.seconds+1)}}},b=g,y=(n("31b8"),Object(f["a"])(b,x,v,!1,null,"270c33c7",null)),w=y.exports,_={components:{screenfull:c["a"],question:m,timer:w},data:function(){return{config:{},chineseOrderNumber:[],questionTypes:[],questionsIndex:[],currentQuestionIndex:"",questionList:[],answer:{},currentType:"",currentIndex:1,questions:{},answers:{},account:"",load:null,paperId:"",isSubmitted:!1}},created:function(){this.paperId=this.$route.query.paperId,this.chineseOrderNumber=this.$store.getters.constant.chineseOrderNumber,this.questionTypes=this.$store.getters.constant.question.types,this.answer=this.$store.getters.constant.answer,this.account=this.$store.getters.userInfo.account,this.openLoad(),this.getPaperDetail()},mounted:function(){this.$refs["screenfull"].isFullscreen||this.$refs["screenfull"].click()},beforeRouteLeave:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,s){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.isSubmitted){e.next=4;break}s(),e.next=8;break;case 4:return this.openLoad(),e.next=7,this.submitPaper();case 7:this.closeLoad();case 8:case"end":return e.stop()}}),e,this)})));function t(t,n,s){return e.apply(this,arguments)}return t}(),methods:{openLoad:function(){this.load=this.$loading({target:this.$refs["examination"]})},closeLoad:function(){this.load&&this.load.close()},getPaperDetail:function(){var e=this,t={paperId:this.$route.query.paperId};this.$store.dispatch("paper/getPaperDetail",t).then((function(t){e.config=t.data.config,e.getPaperQuestions()})).catch((function(){e.$message.error("试卷信息获取失败，请稍后重试"),e.$router.go(-1),e.closeLoad()}))},getPaperQuestions:function(){var e=this,t=this.$route.query.paperId,n=this.$route.query.e;this.$store.dispatch("question/getPaperQuestions",{paperId:t,type:"exam"}).then((function(s){var i=s.data,r=function(s){i[s].map((function(i){e.answers[s]||(e.answers[s]=[]),e.answers[s][i.orderNumber]={paperId:t,qid:i.qid,account:e.account,mineAnswer:"",isTrue:"",score:0,questionType:s,eid:n},e.questions[s]||(e.questions[s]=[]),e.questions[s][i.orderNumber]=i}))};for(var o in i)r(o);e.initQuestionList()})).finally((function(){e.closeLoad()}))},initQuestionList:function(){var e=this;this.questionsIndex=[];var t=0;this.questionList=this.questionTypes.filter((function(t){return e.config[t.type]})).map((function(n){for(var s={index:e.chineseOrderNumber[t],name:n.name,type:n.type,number:e.config[n.type]},i=1;i<=s.number;i++)e.questionsIndex.push("".concat(s.type,"-").concat(i));return t++,s})),this.selectMenuItem(this.questionsIndex[0])},selectMenuItem:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.split("-"),this.currentType=n[0],this.currentIndex=n[1],this.currentQuestionIndex=t;case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),preQuestion:function(){var e=this.questionsIndex.indexOf(this.currentQuestionIndex)-1;if(e<0)return this.$message.error("索引出错，请刷新页面重试！"),!1;this.selectMenuItem(this.questionsIndex[e])},nextQuestion:function(){var e=this.questionsIndex.indexOf(this.currentQuestionIndex)+1;if(e>=this.questionsIndex.length)return this.$message.error("索引出错，请刷新页面重试！"),!1;this.selectMenuItem(this.questionsIndex[e])},submitPaper:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,s,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=!1,t){e.next=4;break}return e.next=4,this.$confirm("确定要交卷吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n=!1})).catch((function(){n=!0}));case 4:if(!n){e.next=6;break}return e.abrupt("return",!1);case 6:return s=null,this.openLoad(),e.next=10,this.$store.dispatch("question/getPaperQuestions",{paperId:this.paperId}).then((function(e){return s=o(e.data,i.answers),s.score.eid=i.$route.query.e,s.score.endExam=i.$moment().format("YYYY-MM-DD HH:mm:ss"),s.score.timeExam=i.$refs["timer"].getUsedTime(),i.$store.dispatch("exam/endExam",s.score)})).then((function(e){for(var t=0,n=s.answerArr.length;t<n;t++)"essays"===s.answerArr[t].questionType&&(s.answerArr[t].mineAnswer=s.answerArr[t].mineAnswer.replace(/\r\n/g,"<br/>").replace(/\n/g,"<br/>").replace(/\s/g,"&nbsp;"));return i.$store.dispatch("answer/saveAnswerRecords",{records:s.answerArr})})).then((function(e){i.$store.commit("tagsView/DEL_VISITED_VIEW",i.$route),i.$message.success("交卷成功！"),i.isSubmitted=!0,i.$router.push("/paper/mine")})).catch((function(){})).finally((function(){i.closeLoad()}));case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),closeFull:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$refs["screenfull"].click(),t=!1,e.next=4,this.$confirm("退出全屏视为结束考试，是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t=!1})).catch((function(){t=!0}));case 4:if(this.closeLoad(),!t){e.next=7;break}return e.abrupt("return",!1);case 7:return e.next=9,this.submitPaper(!0);case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},I=_,q=(n("fcf2"),n("6b7c"),Object(f["a"])(I,s,i,!1,null,"351e2e5b",null));t["default"]=q.exports},fcf2:function(e,t,n){"use strict";var s=n("1226"),i=n.n(s);i.a}}]);